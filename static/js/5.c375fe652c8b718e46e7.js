webpackJsonp([5],{UkDw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("ksHv");var s=n("njuB"),o=n.n(s),a=(n("wvM5"),n("MyDk")),i=n.n(a),r={watch:{$route:function(e,t){}},components:{"vehicle-header":n("teIl").a,"van-field":i.a,"van-divider":o.a},data:function(){return{codeImgSrc:"",type:"pw",smsBtnDisabled:!1,smsBtnName:"发送验证码",loading:!1,userQuery:{account:"",password:"",phone:"",smsCode:"",token:""},userData:null}},created:function(){},methods:{onTypeSelect:function(e){this.type=e},sendSMSCode:function(){if(null===this.userQuery.account.match("^1+[0-9]{10,10}$"))return this.$toast("请输入正确的手机号");var e=this;this.zone.getSMSCode(this.userQuery.account).then(function(t){200==t.status&&200==t.data.status&&(e.userQuery.phone=e.userQuery.account,e.userQuery.token=t.data.data.token,e.$toast("短信验证码已发送"),e.smsBtnDisabled=!0,e.smsSendTime(61,function(t){t>0&&e.userQuery.account==e.userQuery.phone?e.smsBtnName="重新发送("+t+")":(e.smsBtnName="发送验证码",e.smsBtnDisabled=!1)}))})},login:function(){console.log(this.type),"pw"==this.type?(console.log("---call user login---"),this.userLogin()):(console.log("---call phone login---"),this.phoneLogin())},userLogin:function(){var e=this;return""==this.userQuery.account||""==this.userQuery.account.trim()?this.$toast("请输入用户名"):""==this.userQuery.password||""==this.userQuery.password.trim()?this.$toast("请输入密码"):(this.loading=!0,void this.zone.userLogin(this.userQuery.account,this.userQuery.password).then(function(t){e.loading=!1,e.$toast(t.data.message),200==t.status&&200==t.data.status?(console.log("---login---true-"),e.$router.push("/")):console.log("---login---false-")}))},phoneLogin:function(){var e=this;return null===this.userQuery.account.match("^1+[0-9]{10,10}$")?this.$toast("请输入正确的手机号"):null===this.userQuery.smsCode.match("^[0-9]{6,6}$")?this.$toast("请输入正确的短信验证码"):(this.loading=!0,void this.zone.phoneLogin(this.userQuery.account,this.userQuery.smsCode,this.userQuery.token).then(function(t){e.loading=!1,e.$toast(t.data.message),200==t.status&&200==t.data.status?(console.log("---login---true-"),e.$router.push("/")):console.log("---login---false-")}))},smsSendTime:function(e,t){var n=this;--e>0&&setTimeout(function(){n.smsSendTime(e,t)},1e3),t(e)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("vehicle-header",{attrs:{noSearch:"",back:!1,title:"查分助手"}}),e._v(" "),n("h2",[e._v("帐号登陆")]),e._v(" "),e._m(0),e._v(" "),"pw"==e.type?n("div",{staticClass:"login-input"},[n("van-cell-group",{attrs:{inset:""}},[n("van-field",{attrs:{size:"large",placeholder:"请输入帐号",type:"text",label:"帐号"},model:{value:e.userQuery.account,callback:function(t){e.$set(e.userQuery,"account",t)},expression:"userQuery.account"}}),e._v(" "),n("van-field",{attrs:{size:"large",placeholder:"请输入密码",type:"password",label:"密码"},scopedSlots:e._u([{key:"button",fn:function(){},proxy:!0}],null,!1,804099711),model:{value:e.userQuery.password,callback:function(t){e.$set(e.userQuery,"password",t)},expression:"userQuery.password"}})],1),e._v(" "),n("br"),e._v(" "),n("p",{staticStyle:{"text-decoration":"underline",color:"red"},on:{click:function(t){return e.onTypeSelect("sms")}}},[e._v("短信验证码登录")])],1):n("div",{staticClass:"login-input"},[n("van-cell-group",{attrs:{inset:""}},[n("van-field",{attrs:{size:"large",placeholder:"请手机号码",type:"text",label:"手机号"},model:{value:e.userQuery.account,callback:function(t){e.$set(e.userQuery,"account",t)},expression:"userQuery.account"}}),e._v(" "),n("van-field",{attrs:{size:"large",placeholder:"请输短信验证码",type:"",label:"验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"mini","native-type":"button",disabled:e.smsBtnDisabled,type:"primary"},on:{click:e.sendSMSCode}},[e._v(e._s(e.smsBtnName))])]},proxy:!0}]),model:{value:e.userQuery.smsCode,callback:function(t){e.$set(e.userQuery,"smsCode",t)},expression:"userQuery.smsCode"}})],1),e._v(" "),n("br"),e._v(" "),n("p",{staticStyle:{"text-decoration":"underline",color:"red"},on:{click:function(t){return e.onTypeSelect("pw")}}},[e._v("密码登录")])],1),e._v(" "),n("div",{staticClass:"login-btn"},[n("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{block:"",type:"info"},on:{click:function(t){return e.login()}}},[e._v("登陆")]),e._v(" "),n("van-button",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{disabled:"",block:"",loading:"",type:"info","loading-text":"正在登陆..."}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-logo"},[t("img",{attrs:{src:n("7Otq")}})])}]};var u=n("VU/8")(r,c,!1,function(e){n("fBbd")},"data-v-31c4e71a",null);t.default=u.exports},f4Ia:function(e,t){},fBbd:function(e,t){},fMcu:function(e,t){},ksHv:function(e,t,n){n("XqYu"),n("f4Ia")},njuB:function(e,t,n){"use strict";var s=n("R6lU");t.__esModule=!0,t.default=void 0;var o=s(n("AA6R")),a=n("VxeN"),i=n("qOQ7"),r=(0,a.createNamespace)("divider"),c=r[0],u=r[1];function l(e,t,n,s){var a;return e("div",(0,o.default)([{attrs:{role:"separator"},style:{borderColor:t.borderColor},class:u((a={dashed:t.dashed,hairline:t.hairline},a["content-"+t.contentPosition]=n.default,a))},(0,i.inherit)(s,!0)]),[n.default&&n.default()])}l.props={dashed:Boolean,hairline:{type:Boolean,default:!0},contentPosition:{type:String,default:"center"}};var d=c(l);t.default=d},teIl:function(e,t,n){"use strict";n("jydU");var s=n("WQwN"),o=n.n(s),a=(n("tcuZ"),n("iMPx")),i={props:{back:{type:Boolean,default:!0},title:"",iconName:"",iconTo:"",rightText:"",backPath:"",noSearch:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!0},rightClick:{type:Function,default:function(){}}},data:function(){return{search:{word:""}}},components:{"van-nav-bar":n.n(a).a,"van-icon":o.a},methods:{_back:function(){if(this.backPath)return this.$router.push({path:this.backPath});this.$router.go(this.backPath||-1)},onClickRight:function(){console.log(this.iconTo),void 0==this.iconTo||""==this.iconTo?this.$emit("iconClick"):this.$router.push({path:this.iconTo})},onSearch:function(){this.$emit("querySearch",this.search)},onCancel:function(){this.$emit("cancelSearch")}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.back?n("van-nav-bar",{staticClass:"v-nav-bar",staticStyle:{"border-bottom":"1px solid #f1f1f1"},attrs:{title:e.title,fixed:"","left-arrow":"","right-text":e.rightText},on:{"click-left":e._back,"click-right":e.onClickRight},scopedSlots:e._u([{key:"right",fn:function(){return[n("van-icon",{attrs:{name:e.iconName,color:"grey",size:"20"}})]},proxy:!0}],null,!1,2361510147)}):n("van-nav-bar",{staticStyle:{"border-bottom":"1px solid #f1f1f1"},attrs:{fixed:"",title:e.title}}),e._v(" "),0==e.noSearch?n("form",{staticClass:"search",attrs:{action:"/"}},[e.isSearch?n("van-search",{attrs:{shape:"round","show-action":"",background:"#4fc08d",placeholder:"请输入搜索关键词"},on:{search:e.onSearch,cancel:e.onCancel},model:{value:e.search.word,callback:function(t){e.$set(e.search,"word",t)},expression:"search.word"}}):n("div",{staticStyle:{height:"54px",background:"#4fc08d"}})],1):e._e(),e._v(" "),n("div",{style:e.noSearch?"height:47px;":"height:101px;"})],1)},staticRenderFns:[]};var c=n("VU/8")(i,r,!1,function(e){n("fMcu")},"data-v-33bbaf0a",null);t.a=c.exports}});
//# sourceMappingURL=5.c375fe652c8b718e46e7.js.map