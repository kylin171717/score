webpackJsonp([8],{"+V+a":function(t,e){},"+Xq4":function(t,e){},"+ed2":function(t,e){},"+j82":function(t,e){!function(){if("undefined"!=typeof window){var t,e="ontouchstart"in window;document.createTouch||(document.createTouch=function(t,e,r,a,s,o,i){return new n(e,r,{pageX:a,pageY:s,screenX:o,screenY:i,clientX:a-window.pageXOffset,clientY:s-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var t=a(),e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length=arguments.length,t}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var n=function(t,e,n,r,a){r=r||0,a=a||0,this.identifier=e,this.target=t,this.clientX=n.clientX+r,this.clientY=n.clientY+a,this.screenX=n.screenX+r,this.screenY=n.screenY+a,this.pageX=n.pageX+r,this.pageY=n.pageY+a},r=!1;u.multiTouchOffset=75,e||new u}function a(){var t=[];return t.item=function(t){return this[t]||null},t.identifiedTouch=function(t){return this[t+1]||null},t}function s(e){return function(n){var a,s,u;("mousedown"===n.type&&(r=!0),"mouseup"===n.type&&(r=!1),"mousemove"!==n.type||r)&&(("mousedown"===n.type||!t||t&&!t.dispatchEvent)&&(t=n.target),null==t.closest("[data-no-touch-simulate]")&&(a=e,s=n,(u=document.createEvent("Event")).initEvent(a,!0,!0),u.altKey=s.altKey,u.ctrlKey=s.ctrlKey,u.metaKey=s.metaKey,u.shiftKey=s.shiftKey,u.touches=i(s),u.targetTouches=i(s),u.changedTouches=o(s),t.dispatchEvent(u)),"mouseup"===n.type&&(t=null))}}function o(e){var r=a();return r.push(new n(t,1,e,0,0)),r}function i(t){return"mouseup"===t.type?a():o(t)}function u(){window.addEventListener("mousedown",s("touchstart"),!0),window.addEventListener("mousemove",s("touchmove"),!0),window.addEventListener("mouseup",s("touchend"),!0)}}()},"/SKB":function(t,e){},0:function(t,e){},"0+S2":function(t,e){},"0DIp":function(t,e){},"0Udj":function(t,e){},"0Y+T":function(t,e){},"8a0f":function(t,e){},"9NA7":function(t,e){},"9S6h":function(t,e){},"9fCr":function(t,e){},CNiB:function(t,e){},"D+QW":function(t,e){},HZoF:function(t,e){},KOkH:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("tAVL");var r=n("z90b"),a=n.n(r),s=(n("xisQ"),n("SBrL")),o=n.n(s),i=(n("uvlK"),n("lxre")),u=n.n(i),c=(n("dlG5"),n("MpXg")),f=n.n(c),h=(n("OMF1"),n("Maz4")),l=n.n(h),d=(n("jydU"),n("WQwN")),p=n.n(d),m=(n("9ULi"),n("lQdh")),g=n.n(m),v=(n("Mcfu"),n("r9aq")),y=n.n(v),x=(n("QP/A"),n("pyxX")),w=n.n(x),T=(n("cnGM"),n("S6j6")),C=n.n(T),b=(n("tcuZ"),n("iMPx")),k=n.n(b),S=(n("FDxC"),n("w+oK")),A=n.n(S),I=(n("GKy3"),n("4vvA")),E=n.n(I),U=(n("tLo2"),n("blRl")),B=n.n(U),M=(n("2PSJ"),n("A9fu")),D=n.n(M),X=(n("wvM5"),n("MyDk")),$=n.n(X),R=(n("MHRi"),n("6xqC")),Y=n.n(R),G=(n("Rv11"),n("TMdk")),L=n.n(G),N=(n("dL9u"),n("L00R")),P=n.n(N),j=(n("jgNZ"),n("syWm")),z=n.n(j),F=(n("dKGA"),n("kSul")),q=n.n(F),O=(n("CCOf"),n("rrcz")),K=n.n(O),V=(n("3evy"),n("Irlo")),_=n.n(V),W=(n("i9vB"),n("Mqtp")),Z=n.n(W),H=(n("pLKN"),n("mZJz")),J=n.n(H),Q=(n("uTM9"),n("Jq84")),tt=n.n(Q),et=(n("ZV4y"),n("fcGX")),nt=n.n(et),rt=n("7+uW"),at={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{"u-app":this.uapp},attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var st=n("VU/8")({name:"App",data:function(){return{uapp:!1}}},at,!1,function(t){n("oXHB")},null,null).exports,ot=n("/ocq"),it=n("NYxO");rt.default.use(it.a);var ut=new it.a.Store({state:{token:"",smsToken:"",userInfo:{}},mutations:{setToken:function(t,e){t.token=e,localStorage.setItem("token",e)},setUserInfo:function(t,e){t.userInfo=e,localStorage.setItem("userInfo",JSON.stringify(e))},setSMSToken:function(t,e){t.smsToken=e,localStorage.setItem("smsToken",e)},clear:function(t){t.token="",t.smsToken="",t.userInfo={},localStorage.setItem("token",""),localStorage.setItem("userInfo",{}),localStorage.setItem("smsToken","")}},getters:{getToken:function(t){return function(){return""==t.token&&(t.token=localStorage.getItem("token")),t.token}},getUserInfo:function(t){return function(){return void 0==t.userInfo.studentName&&(t.userInfo=JSON.parse(localStorage.getItem("userInfo"))),t.userInfo}},getSMSToken:function(t){return function(){return""==t.smsToken&&(t.smsToken=localStorage.getItem("smsToken")),t.smsToken}}},actions:{},modules:{}});rt.default.use(ot.a);var ct=new ot.a({routes:[{path:"/",name:"Home",component:function(){return n.e(3).then(n.bind(null,"xkS0"))},redirect:"/index",meta:{keepAlive:!0},children:[{path:"/index",name:"index",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"mlqX"))},meta:{keepAlive:!0}},{path:"/exam",name:"exam",component:function(){return n.e(1).then(n.bind(null,"Pj63"))},meta:{keepAlive:!0}},{path:"/subject",name:"subject",component:function(){return n.e(2).then(n.bind(null,"V3Wk"))}},{path:"/user",name:"user",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"i/Eh"))},meta:{keepAlive:!0}}]},{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"UkDw"))},meta:{anonymous:!0}}]});ct.beforeEach(function(t,e,n){if(""!=ut.getters.getToken()||"/login"===t.path)return n();n({path:"/login"})});var ft=ct,ht=n("mtWM"),lt=n.n(ht),dt=n("7hDC"),pt=n.n(dt),mt=n("En79"),gt=n.n(mt),vt=n("PXCl"),yt=n("mtWM"),xt=n("mw3O"),wt={Version:"3.1.0"};function Tt(t,e){return"my"==t?"https://szone-my.7net.cc"+e:"api"==t?"https://szone-api.7net.cc"+e:"score"==t?"https://szone-score.7net.cc"+e:void 0}function Ct(){return bt.apply(this,arguments)}function bt(){return(bt=pt()(gt.a.mark(function t(){var e,n;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=ut.getters.getToken(),t.next=3,yt.get(Tt("my","/userInfo/GetUserInfo"),{headers:{Version:"3.1.0",Token:e}});case 3:return 200==(n=t.sent).status&&200==n.data.status?ut.commit("setUserInfo",n.data.data):It(),t.abrupt("return",n);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function kt(){return(kt=pt()(gt.a.mark(function t(e,n){var r,a;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={userCode:e,password:vt.encode(n)},t.next=3,yt.post(Tt("my","/login"),xt.stringify(r),{headers:wt});case 3:return 200==(a=t.sent).status&&200==a.data.status&&(ut.commit("setToken",a.data.data.token),a=Ct()),t.abrupt("return",a);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function St(){return(St=pt()(gt.a.mark(function t(e){var n,r;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={userCode:vt.encode(e)},t.next=3,yt.post(Tt("my","/login/sendsms"),xt.stringify(n),{headers:wt});case 3:return 200==(r=t.sent).status&&200==r.data.status&&ut.commit("setSMSToken",r.data.data.token),t.abrupt("return",r);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function At(){return(At=pt()(gt.a.mark(function t(e,n){var r,a;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={userCode:e,verifyCode:n,token:ut.getters.getSMSToken()},t.next=3,yt.post(Tt("my","/login/entry"),xt.stringify(r),{headers:wt});case 3:return a=t.sent,console.log(a),200==a.status&&200==a.data.status&&(ut.commit("setToken",a.data.data.token),a=Ct()),t.abrupt("return",a);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function It(){ut.commit("clear")}function Et(){return(Et=pt()(gt.a.mark(function t(){var e,n;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=ut.getters.getUserInfo(),n={studentName:e.studentName,schoolGuid:e.schoolGuid},t.next=4,yt.get(Tt("score","/exam/getExamCount?")+xt.stringify(n),{headers:{Version:"3.1.0",Token:ut.getters.getToken()}});case 4:t.sent;case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Ut(){return(Ut=pt()(gt.a.mark(function t(e,n){var r,a,s;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=ut.getters.getUserInfo(),a={grade:r.grade,rows:e,startIndex:n,schoolGuid:r.schoolGuid,studentName:r.studentName},t.next=4,yt.get(Tt("score","/exam/getClaimExams?")+xt.stringify(a),{headers:{Version:"3.1.0",Token:ut.getters.getToken()}});case 4:return 200==(s=t.sent).status&&401==s.data.status&&It(),t.abrupt("return",s);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Bt(){return(Bt=pt()(gt.a.mark(function t(e){var n,r,a;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={examGuid:e.examGuid,studentCode:e.studentCode,schoolGuid:e.schoolGuid,grade:e.gradeCodeString,ruCode:e.ruCode},r={Version:"3.1.0",Token:ut.getters.getToken(),"Content-Type":"application/x-www-form-urlencoded"},t.next=4,yt.post(Tt("score","/Question/Subjects"),xt.stringify(n),{headers:r});case 4:return 200==(a=t.sent).status&&401==a.data.status&&It(),t.abrupt("return",a);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Mt(){return(Mt=pt()(gt.a.mark(function t(e,n,r){var a,s,o,i;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=ut.getters.getUserInfo(),s={schoolGuid:e.schoolGuid,studentCode:e.studentCode,studentName:a.studentName,grade:e.gradeCodeString,ruCode:e.ruCode,examGuid:e.examGuid,examSchoolGuid:n.schoolGuid,examType:n.examType,subject:r.km,compareClassAvg:r.compareClassAvg},o={Version:"3.1.0",Token:ut.getters.getToken(),"Content-Type":"application/x-www-form-urlencoded"},t.next=5,yt.post(Tt("score","/Question/SubjectGrade"),xt.stringify(s),{headers:o});case 5:return 200==(i=t.sent).status&&401==i.data.status&&It(),t.abrupt("return",i);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Dt(){return(Dt=pt()(gt.a.mark(function t(e,n,r){var a,s,o,i;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=ut.getters.getUserInfo(),s={asiresponse:r.question.asiresponse,examGuid:e.examGuid,srcSubject:r.srcKM,studentName:a.studentName,ruCode:e.ruCode,scoreStatus:"-1",schoolGuid:e.schoolGuid},o={Version:"3.1.0",Token:ut.getters.getToken(),"Content-Type":"application/x-www-form-urlencoded"},t.next=5,yt.post(Tt("score","/Question/AnswerCardUrl"),xt.stringify(s),{headers:o});case 5:return 200==(i=t.sent).status&&401==i.data.status&&It(),t.abrupt("return",i);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}var Xt={queryUserInfo:Ct,getSMSCode:function(t){return St.apply(this,arguments)},userLogin:function(t,e){return kt.apply(this,arguments)},phoneLogin:function(t,e){return At.apply(this,arguments)},userLogout:It,queryExamCount:function(){return Et.apply(this,arguments)},queryExamList:function(t,e){return Ut.apply(this,arguments)},querySubjectInfo:function(t){return Bt.apply(this,arguments)},querySubjectGrade:function(t,e,n){return Mt.apply(this,arguments)},queryAnswerCard:function(t,e,n){return Dt.apply(this,arguments)}},$t=n("mw3O"),Rt=n.n($t),Yt=n("I0MY"),Gt=n.n(Yt),Lt=n("hilY");n("+j82");rt.default.use(nt.a),rt.default.use(tt.a),rt.default.use(J.a),rt.default.use(Lt.a),rt.default.use(Z.a),rt.default.use(_.a),rt.default.use(K.a),rt.default.use(q.a),rt.default.use(z.a),rt.default.use(P.a),rt.default.use(L.a),rt.default.use(Y.a),rt.default.use($.a),rt.default.use(D.a),rt.default.use(B.a),rt.default.use(E.a),rt.default.use(A.a),rt.default.use(k.a),rt.default.use(C.a),rt.default.use(w.a),rt.default.use(y.a),rt.default.use(g.a),rt.default.use(p.a),rt.default.use(l.a),rt.default.use(f.a),rt.default.use(u.a),rt.default.use(o.a),rt.default.use(a.a),rt.default.use(Gt.a),rt.default.config.productionTip=!1,rt.default.prototype.http=lt.a,rt.default.prototype.zone=Xt,rt.default.prototype.qs=Rt.a,rt.default.prototype.user={id:0,name:"",token:0,icon:""},lt.a.defaults.baseURL="",new rt.default({el:"#app",store:ut,router:ft,components:{App:st},template:"<App/>"})},OEKK:function(t,e){},PXCl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){n.d(e,"version",function(){return r}),n.d(e,"VERSION",function(){return a}),n.d(e,"atob",function(){return M}),n.d(e,"atobPolyfill",function(){return B}),n.d(e,"btoa",function(){return y}),n.d(e,"btoaPolyfill",function(){return v}),n.d(e,"fromBase64",function(){return Y}),n.d(e,"toBase64",function(){return S}),n.d(e,"utob",function(){return b}),n.d(e,"encode",function(){return S}),n.d(e,"encodeURI",function(){return A}),n.d(e,"encodeURL",function(){return A}),n.d(e,"btou",function(){return U}),n.d(e,"decode",function(){return Y}),n.d(e,"isValid",function(){return G}),n.d(e,"fromUint8Array",function(){return w}),n.d(e,"toUint8Array",function(){return X}),n.d(e,"extendString",function(){return N}),n.d(e,"extendUint8Array",function(){return P}),n.d(e,"extendBuiltins",function(){return j}),n.d(e,"Base64",function(){return z});const r="3.7.2",a=r,s="function"==typeof atob,o="function"==typeof btoa,i="function"==typeof t,u="function"==typeof TextDecoder?new TextDecoder:void 0,c="function"==typeof TextEncoder?new TextEncoder:void 0,f=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),h=(t=>{let e={};return f.forEach((t,n)=>e[t]=n),e})(),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),m=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),g=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),v=t=>{let e,n,r,a,s="";const o=t.length%3;for(let o=0;o<t.length;){if((n=t.charCodeAt(o++))>255||(r=t.charCodeAt(o++))>255||(a=t.charCodeAt(o++))>255)throw new TypeError("invalid character found");s+=f[(e=n<<16|r<<8|a)>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}return o?s.slice(0,o-3)+"===".substring(o):s},y=o?t=>btoa(t):i?e=>t.from(e,"binary").toString("base64"):v,x=i?e=>t.from(e).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(d.apply(null,t.subarray(n,n+4096)));return y(e.join(""))},w=(t,e=!1)=>e?m(x(t)):x(t),T=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?d(192|e>>>6)+d(128|63&e):d(224|e>>>12&15)+d(128|e>>>6&63)+d(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return d(240|e>>>18&7)+d(128|e>>>12&63)+d(128|e>>>6&63)+d(128|63&e)},C=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=t=>t.replace(C,T),k=i?e=>t.from(e,"utf8").toString("base64"):c?t=>x(c.encode(t)):t=>y(b(t)),S=(t,e=!1)=>e?m(k(t)):k(t),A=t=>S(t,!0),I=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return d(55296+(e>>>10))+d(56320+(1023&e));case 3:return d((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return d((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},U=t=>t.replace(I,E),B=t=>{if(t=t.replace(/\s+/g,""),!l.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,n,r,a="";for(let s=0;s<t.length;)e=h[t.charAt(s++)]<<18|h[t.charAt(s++)]<<12|(n=h[t.charAt(s++)])<<6|(r=h[t.charAt(s++)]),a+=64===n?d(e>>16&255):64===r?d(e>>16&255,e>>8&255):d(e>>16&255,e>>8&255,255&e);return a},M=s?t=>atob(g(t)):i?e=>t.from(e,"base64").toString("binary"):B,D=i?e=>p(t.from(e,"base64")):t=>p(M(t),t=>t.charCodeAt(0)),X=t=>D(R(t)),$=i?e=>t.from(e,"base64").toString("utf8"):u?t=>u.decode(D(t)):t=>U(M(t)),R=t=>g(t.replace(/[-_]/g,t=>"-"==t?"+":"/")),Y=t=>$(R(t)),G=t=>{if("string"!=typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},L=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),N=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,L(e));t("fromBase64",function(){return Y(this)}),t("toBase64",function(t){return S(this,t)}),t("toBase64URI",function(){return S(this,!0)}),t("toBase64URL",function(){return S(this,!0)}),t("toUint8Array",function(){return X(this)})},P=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,L(e));t("toBase64",function(t){return w(this,t)}),t("toBase64URI",function(){return w(this,!0)}),t("toBase64URL",function(){return w(this,!0)})},j=()=>{N(),P()},z={version:r,VERSION:a,atob:M,atobPolyfill:B,btoa:y,btoaPolyfill:v,fromBase64:Y,toBase64:S,encode:S,encodeURI:A,encodeURL:A,utob:b,btou:U,decode:Y,isValid:G,fromUint8Array:w,toUint8Array:X,extendString:N,extendUint8Array:P,extendBuiltins:j}}.call(e,n("EuP9").Buffer)},UR9n:function(t,e){},"Uf+m":function(t,e){},V08F:function(t,e){},XqYu:function(t,e){},YAYC:function(t,e){},"Z+4s":function(t,e){},Zzpz:function(t,e){},aG1J:function(t,e){},"c/In":function(t,e){},gMie:function(t,e){},hSFT:function(t,e){},j7dL:function(t,e){},jLuM:function(t,e){},k86u:function(t,e){},ldAg:function(t,e){},"lk/p":function(t,e){},nqem:function(t,e){},oXHB:function(t,e){},s1Ps:function(t,e){},sPX0:function(t,e,n){"use strict";var r={props:{width:{type:Number,default:800},height:{type:Number,default:300},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#000000"},bgColor:{type:String,default:""},isCrop:{type:Boolean,default:!1},isClearBgColor:{type:Boolean,default:!0},format:{type:String,default:"image/png"},quality:{type:Number,default:1}},data:()=>({hasDrew:!1,resultImg:"",points:[],canvasTxt:null,startX:0,startY:0,isDrawing:!1,sratio:1}),computed:{ratio(){return this.height/this.width},stageInfo(){return this.$refs.canvas.getBoundingClientRect()},myBg(){return this.bgColor?this.bgColor:"rgba(255, 255, 255, 0)"}},watch:{myBg:function(t){this.$refs.canvas.style.background=t}},beforeMount(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy(){window.removeEventListener("resize",this.$_resizeHandler)},mounted(){const t=this.$refs.canvas;t.height=this.height,t.width=this.width,t.style.background=this.myBg,this.$_resizeHandler(),document.onmouseup=(()=>{this.isDrawing=!1})},methods:{$_resizeHandler(){const t=this.$refs.canvas;t.style.width=this.width+"px";const e=parseFloat(window.getComputedStyle(t).width);t.style.height=this.ratio*e+"px",this.canvasTxt=t.getContext("2d"),this.canvasTxt.scale(1*this.sratio,1*this.sratio),this.sratio=e/this.width,this.canvasTxt.scale(1/this.sratio,1/this.sratio)},mouseDown(t){(t=t||event).preventDefault(),this.isDrawing=!0,this.hasDrew=!0;let e={x:t.offsetX,y:t.offsetY};this.drawStart(e)},mouseMove(t){if((t=t||event).preventDefault(),this.isDrawing){let e={x:t.offsetX,y:t.offsetY};this.drawMove(e)}},mouseUp(t){(t=t||event).preventDefault();let e={x:t.offsetX,y:t.offsetY};this.drawEnd(e),this.isDrawing=!1},touchStart(t){if((t=t||event).preventDefault(),this.hasDrew=!0,1===t.touches.length){let e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawStart(e)}},touchMove(t){if((t=t||event).preventDefault(),1===t.touches.length){let e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawMove(e)}},touchEnd(t){if((t=t||event).preventDefault(),1===t.touches.length){let e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawEnd(e)}},drawStart(t){this.startX=t.x,this.startY=t.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t)},drawMove(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.strokeStyle=this.lineColor,this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=t.y,this.startX=t.x,this.points.push(t)},drawEnd(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t),this.points.push({x:-1,y:-1})},generate(t){let e=t&&t.format?t.format:this.format,n=t&&t.quality?t.quality:this.quality;return new Promise((t,r)=>{if(this.hasDrew){var a=this.canvasTxt.getImageData(0,0,this.$refs.canvas.width,this.$refs.canvas.height);this.canvasTxt.globalCompositeOperation="destination-over",this.canvasTxt.fillStyle=this.myBg,this.canvasTxt.fillRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.resultImg=this.$refs.canvas.toDataURL(e,n);var s=this.resultImg;if(this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.canvasTxt.putImageData(a,0,0),this.canvasTxt.globalCompositeOperation="source-over",this.isCrop){const t=this.getCropArea(a.data);var o=document.createElement("canvas");const r=o.getContext("2d");o.width=t[2]-t[0],o.height=t[3]-t[1];const i=this.canvasTxt.getImageData(...t);r.globalCompositeOperation="destination-over",r.putImageData(i,0,0),r.fillStyle=this.myBg,r.fillRect(0,0,o.width,o.height),s=o.toDataURL(e,n),o=null}t(s)}else r("Warning: Not Signned!")})},reset(){this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.isClearBgColor&&(this.$emit("update:bgColor",""),this.$refs.canvas.style.background="rgba(255, 255, 255, 0)"),this.points=[],this.hasDrew=!1,this.resultImg=""},getCropArea(t){for(var e=this.$refs.canvas.width,n=0,r=this.$refs.canvas.height,a=0,s=0;s<this.$refs.canvas.width;s++)for(var o=0;o<this.$refs.canvas.height;o++){var i=4*(s+this.$refs.canvas.width*o);(t[i]>0||t[i+1]>0||t[i+2]||t[i+3]>0)&&(a=Math.max(o,a),n=Math.max(s,n),r=Math.min(o,r),e=Math.min(s,e))}return[++e,++r,++n,++a]}}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas",on:{mousedown:this.mouseDown,mousemove:this.mouseMove,mouseup:this.mouseUp,touchstart:this.touchStart,touchmove:this.touchMove,touchend:this.touchEnd}})},staticRenderFns:[]};var s=n("VU/8")(r,a,!1,function(t){n("ldAg")},"data-v-a1968bcc",null);e.a=s.exports},"vm/u":function(t,e){},yggM:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.75facfde7e388ad523dd.js.map